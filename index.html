<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ï–≥–∏–ø–µ—Ç—Å–∫–∏–π –î–∏–Ω–æ–∑–∞–≤—Ä–∏–∫</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            touch-action: manipulation;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: #000;
        }

        body {
            font-family: 'Arial', sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(180deg, #0c1445 0%, #1a1a2e 100%);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
        }

        /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–≥—Ä—ã - –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω */
        .game-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1;
            overflow: hidden;
        }

        /* –ö–∞–Ω–≤–∞—Å - –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω */
        #gameCanvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: block;
            cursor: pointer;
            image-rendering: -moz-crisp-edges;
            image-rendering: -webkit-crisp-edges;
            image-rendering: pixelated;
            image-rendering: crisp-edges;
        }

        /* –û–≤–µ—Ä–ª–µ–π —Å—á–µ—Ç–∞ - —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã */
        .score-overlay {
            position: fixed;
            top: 30px;
            left: 30px;
            z-index: 10;
            display: flex;
            gap: 40px;
            background: rgba(0, 0, 0, 0.7);
            padding: 20px 35px;
            border-radius: 15px;
            border: 2px solid rgba(255, 215, 0, 0.3);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }

        .score-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 120px;
        }

        .score-label {
            font-size: 14px;
            color: #D4AF37;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: 600;
        }

        .score-value {
            font-size: 48px;
            font-weight: 900;
            color: #FFD700;
            text-shadow: 0 0 20px #FFD700;
            font-family: 'Courier New', monospace;
            line-height: 1;
        }

        #score {
            color: #FFD700;
        }

        #highScore {
            color: #4ECDC4;
        }

        #fps {
            color: #FF6B6B;
        }

        /* –ö–Ω–æ–ø–∫–∞ –ø—Ä—ã–∂–∫–∞ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö - –¢–û–õ–¨–ö–û –ù–ê –¢–ï–õ–ï–§–û–ù–ï */
        .mobile-jump-btn {
            position: fixed;
            bottom: 50px;
            right: 50px;
            width: 140px;
            height: 140px;
            border-radius: 50%;
            background: linear-gradient(145deg, #D4AF37, #B8860B);
            border: none;
            cursor: pointer;
            z-index: 100;
            display: none;
            box-shadow: 
                0 15px 35px rgba(212, 175, 55, 0.5),
                inset 0 4px 10px rgba(255, 255, 255, 0.3),
                inset 0 -4px 10px rgba(0, 0, 0, 0.2);
            transition: all 0.15s ease;
            overflow: hidden;
        }

        .mobile-jump-btn::before {
            content: '‚Üë';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 60px;
            color: #8B4513;
            font-weight: bold;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .mobile-jump-btn::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at center, rgba(255,255,255,0.2) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.3s;
        }

        .mobile-jump-btn:active {
            transform: scale(0.92);
            box-shadow: 
                0 5px 20px rgba(212, 175, 55, 0.3),
                inset 0 4px 10px rgba(255, 255, 255, 0.2),
                inset 0 -4px 10px rgba(0, 0, 0, 0.3);
        }

        .mobile-jump-btn:active::after {
            opacity: 1;
        }

        /* –≠–∫—Ä–∞–Ω Game Over */
        .game-over {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(20, 20, 40, 0.95);
            color: #FFD700;
            padding: 60px 80px;
            border-radius: 20px;
            text-align: center;
            display: none;
            z-index: 1000;
            box-shadow: 
                0 0 80px rgba(255, 215, 0, 0.3),
                0 20px 60px rgba(0, 0, 0, 0.8);
            border: 4px solid #D4AF37;
            min-width: 400px;
            min-height: 300px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(20px);
            animation: gameOverAppear 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes gameOverAppear {
            from {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.8);
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }

        .game-over h2 {
            font-size: 56px;
            margin-bottom: 30px;
            color: #D4AF37;
            text-shadow: 0 0 30px rgba(212, 175, 55, 0.8);
            letter-spacing: 3px;
            font-weight: 900;
            text-transform: uppercase;
        }

        .game-over p {
            font-size: 42px;
            margin-bottom: 50px;
            color: #FFD700;
            font-weight: 700;
            font-family: 'Courier New', monospace;
        }

        .game-over button {
            padding: 25px 50px;
            font-size: 28px;
            background: linear-gradient(145deg, #D4AF37, #B8860B);
            color: #8B4513;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 700;
            min-width: 300px;
            box-shadow: 
                0 10px 30px rgba(212, 175, 55, 0.4),
                inset 0 2px 5px rgba(255, 255, 255, 0.3);
            letter-spacing: 1px;
            text-transform: uppercase;
            position: relative;
            overflow: hidden;
        }

        .game-over button:hover {
            transform: translateY(-5px);
            box-shadow: 
                0 15px 40px rgba(212, 175, 55, 0.6),
                inset 0 2px 5px rgba(255, 255, 255, 0.3);
            background: linear-gradient(145deg, #B8860B, #D4AF37);
        }

        .game-over button:active {
            transform: translateY(2px);
            box-shadow: 
                0 5px 20px rgba(212, 175, 55, 0.4),
                inset 0 2px 5px rgba(255, 255, 255, 0.3);
        }

        .game-over button::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.7s;
        }

        .game-over button:hover::after {
            left: 100%;
        }

        /* –°—Ç–∞—Ä—Ç–æ–≤—ã–π —ç–∫—Ä–∞–Ω */
        .start-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(20, 20, 40, 0.95);
            color: #FFD700;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            text-align: center;
            padding: 40px;
            backdrop-filter: blur(10px);
            display: none;
        }

        .start-screen h1 {
            font-size: 64px;
            margin-bottom: 30px;
            color: #D4AF37;
            text-shadow: 0 0 30px rgba(212, 175, 55, 0.7);
            letter-spacing: 2px;
            font-weight: 900;
            animation: titleGlow 2s infinite alternate;
        }

        @keyframes titleGlow {
            from {
                text-shadow: 0 0 20px rgba(212, 175, 55, 0.7);
            }
            to {
                text-shadow: 0 0 40px rgba(212, 175, 55, 1), 0 0 60px rgba(212, 175, 55, 0.5);
            }
        }

        .start-screen p {
            font-size: 24px;
            margin-bottom: 50px;
            max-width: 800px;
            line-height: 1.6;
            color: #FFD700;
        }

        .controls-info {
            background: rgba(255, 255, 255, 0.1);
            padding: 30px 50px;
            border-radius: 15px;
            margin-bottom: 50px;
            font-size: 22px;
            backdrop-filter: blur(5px);
            border: 2px solid rgba(212, 175, 55, 0.3);
        }

        .controls-info p {
            margin: 15px 0;
            font-size: 22px;
            color: #FFD700;
        }

        .key {
            display: inline-block;
            background: rgba(212, 175, 55, 0.2);
            color: #FFD700;
            padding: 8px 20px;
            border-radius: 8px;
            margin: 0 10px;
            font-family: 'Courier New', monospace;
            font-size: 20px;
            font-weight: bold;
            min-width: 100px;
            border: 2px solid rgba(212, 175, 55, 0.3);
        }

        .start-screen button {
            padding: 25px 60px;
            font-size: 32px;
            background: linear-gradient(145deg, #D4AF37, #B8860B);
            color: #8B4513;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-weight: 700;
            box-shadow: 
                0 15px 40px rgba(212, 175, 55, 0.4),
                inset 0 2px 5px rgba(255, 255, 255, 0.3);
            transition: all 0.3s;
            letter-spacing: 2px;
            text-transform: uppercase;
            position: relative;
            overflow: hidden;
        }

        .start-screen button:hover {
            transform: scale(1.05);
            box-shadow: 
                0 20px 50px rgba(212, 175, 55, 0.6),
                inset 0 2px 5px rgba(255, 255, 255, 0.3);
            background: linear-gradient(145deg, #B8860B, #D4AF37);
        }

        .start-screen button::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.7s;
        }

        .start-screen button:hover::after {
            left: 100%;
        }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è —Å—á–µ—Ç–∞ */
        @keyframes scorePop {
            0% { transform: scale(1); }
            50% { transform: scale(1.3); }
            100% { transform: scale(1); }
        }

        .score-pop {
            animation: scorePop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes newRecord {
            0% { 
                color: #4ECDC4;
                text-shadow: 0 0 20px #4ECDC4;
            }
            50% { 
                color: #FFD700;
                text-shadow: 0 0 40px #FFD700, 0 0 60px #FFD700;
                transform: scale(1.2);
            }
            100% { 
                color: #4ECDC4;
                text-shadow: 0 0 20px #4ECDC4;
            }
        }

        .new-record {
            animation: newRecord 1s ease 3;
        }

        @keyframes pulse {
            0% { opacity: 0.7; }
            50% { opacity: 1; }
            100% { opacity: 0.7; }
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –æ—á–µ–Ω—å –±–æ–ª—å—à–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ (4K) */
        @media (min-width: 2560px) {
            .score-overlay {
                top: 50px;
                left: 50px;
                padding: 30px 50px;
                gap: 60px;
            }
            
            .score-label {
                font-size: 18px;
            }
            
            .score-value {
                font-size: 64px;
            }
            
            .score-item {
                min-width: 180px;
            }
            
            .game-over {
                padding: 80px 120px;
                min-width: 700px;
                min-height: 500px;
                border-radius: 35px;
                border-width: 6px;
            }
            
            .game-over h2 {
                font-size: 72px;
            }
            
            .game-over p {
                font-size: 56px;
            }
            
            .game-over button {
                padding: 35px 70px;
                font-size: 36px;
                min-width: 400px;
                border-radius: 20px;
            }
            
            .mobile-jump-btn {
                width: 180px;
                height: 180px;
                bottom: 70px;
                right: 70px;
            }
            
            .mobile-jump-btn::before {
                font-size: 80px;
            }
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è —Å—Ä–µ–¥–Ω–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
        @media (max-width: 1366px) {
            .score-overlay {
                top: 20px;
                left: 20px;
                padding: 15px 25px;
                gap: 30px;
            }
            
            .score-label {
                font-size: 12px;
            }
            
            .score-value {
                font-size: 36px;
            }
            
            .score-item {
                min-width: 100px;
            }
            
            .game-over {
                padding: 40px 60px;
                min-width: 400px;
                min-height: 300px;
            }
            
            .game-over h2 {
                font-size: 42px;
            }
            
            .game-over p {
                font-size: 32px;
            }
            
            .game-over button {
                padding: 20px 40px;
                font-size: 24px;
                min-width: 250px;
            }
        }

        /* –î–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ - –í–ö–õ–Æ–ß–ê–ï–ú –ö–ù–û–ü–ö–£ –ü–†–´–ñ–ö–ê */
        @media (max-width: 768px) {
            .mobile-jump-btn {
                display: block;
            }
            
            .start-screen {
                display: none !important;
            }
            
            .score-overlay {
                top: 15px;
                left: 15px;
                padding: 12px 20px;
                gap: 20px;
                flex-direction: column;
                align-items: flex-start;
                background: rgba(0, 0, 0, 0.9);
            }
            
            .score-item {
                flex-direction: row;
                align-items: center;
                gap: 15px;
                min-width: auto;
            }
            
            .score-label {
                margin-bottom: 0;
                font-size: 11px;
                min-width: 60px;
            }
            
            .score-value {
                font-size: 28px;
            }
            
            .game-over {
                padding: 30px;
                min-width: 90%;
                min-height: auto;
                border-radius: 20px;
                border-width: 3px;
            }
            
            .game-over h2 {
                font-size: 32px;
                margin-bottom: 20px;
            }
            
            .game-over p {
                font-size: 24px;
                margin-bottom: 30px;
            }
            
            .game-over button {
                padding: 18px 30px;
                font-size: 20px;
                min-width: 200px;
            }
            
            .mobile-jump-btn {
                width: 120px;
                height: 120px;
                bottom: 30px;
                right: 30px;
            }
            
            .mobile-jump-btn::before {
                font-size: 50px;
            }
        }

        /* –î–ª—è –æ—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∏—Ö —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ */
        @media (max-width: 480px) {
            .score-overlay {
                top: 10px;
                left: 10px;
                padding: 10px 15px;
                gap: 15px;
            }
            
            .score-label {
                font-size: 10px;
                min-width: 50px;
            }
            
            .score-value {
                font-size: 22px;
            }
            
            .game-over {
                padding: 25px;
            }
            
            .game-over h2 {
                font-size: 28px;
            }
            
            .game-over p {
                font-size: 20px;
            }
            
            .game-over button {
                padding: 15px 25px;
                font-size: 18px;
                min-width: 180px;
            }
            
            .mobile-jump-btn {
                width: 100px;
                height: 100px;
                bottom: 20px;
                right: 20px;
            }
            
            .mobile-jump-btn::before {
                font-size: 40px;
            }
        }

        /* –î–ª—è –ª–∞–Ω–¥—à–∞—Ñ—Ç–Ω–æ–π –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞—Ö */
        @media (max-height: 500px) and (orientation: landscape) {
            .score-overlay {
                flex-direction: row;
                top: 10px;
                left: 10px;
                padding: 8px 15px;
                gap: 25px;
            }
            
            .score-item {
                flex-direction: column;
                align-items: center;
                gap: 5px;
            }
            
            .score-label {
                font-size: 9px;
                min-width: auto;
            }
            
            .score-value {
                font-size: 20px;
            }
            
            .mobile-jump-btn {
                width: 80px;
                height: 80px;
                bottom: 15px;
                right: 15px;
            }
            
            .mobile-jump-btn::before {
                font-size: 30px;
            }
            
            .game-over {
                padding: 20px;
                min-width: 80%;
            }
            
            .game-over h2 {
                font-size: 24px;
                margin-bottom: 15px;
            }
            
            .game-over p {
                font-size: 18px;
                margin-bottom: 20px;
            }
            
            .game-over button {
                padding: 12px 20px;
                font-size: 16px;
                min-width: 150px;
            }
        }

        /* –î–ª—è –æ—á–µ–Ω—å –≤—ã—Å–æ–∫–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
        @media (min-height: 1200px) {
            .score-overlay {
                top: 50px;
                left: 50px;
            }
            
            .mobile-jump-btn {
                bottom: 80px;
                right: 80px;
            }
        }

        /* –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –≤—ã–¥–µ–ª–µ–Ω–∏—è –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –º–µ–Ω—é */
        #gameCanvas {
            -webkit-tap-highlight-color: transparent;
        }

        /* –ü–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
        html {
            scroll-behavior: smooth;
        }

        /* –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π hover */
        @media (hover: hover) and (pointer: fine) {
            .game-over button:hover,
            .start-screen button:hover,
            .mobile-jump-btn:hover {
                transition: all 0.2s ease;
            }
        }

        /* –î–ª—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –±–µ–∑ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ hover (–º–æ–±–∏–ª—å–Ω—ã–µ) */
        @media (hover: none) and (pointer: coarse) {
            .game-over button:active,
            .start-screen button:active,
            .mobile-jump-btn:active {
                transition: all 0.1s ease;
            }
        }

        /* –ó–∞–ø—Ä–µ—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
        @media (max-width: 768px) {
            html, body {
                touch-action: none;
                -webkit-text-size-adjust: none;
                text-size-adjust: none;
            }
        }

        /* –ü–∏—Ä–∞–º–∏–¥—ã –∏ –µ–≥–∏–ø–µ—Ç—Å–∫–∏–µ —É–∑–æ—Ä—ã –Ω–∞ —Ñ–æ–Ω–µ */
        .egypt-pattern {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(45deg, rgba(212, 175, 55, 0.03) 25%, transparent 25%),
                linear-gradient(-45deg, rgba(212, 175, 55, 0.03) 25%, transparent 25%),
                linear-gradient(45deg, transparent 75%, rgba(212, 175, 55, 0.03) 75%),
                linear-gradient(-45deg, transparent 75%, rgba(212, 175, 55, 0.03) 75%);
            background-size: 100px 100px;
            background-position: 0 0, 0 50px, 50px -50px, -50px 0px;
            z-index: 0;
            opacity: 0.3;
        }
    </style>
</head>
<body>
    <div class="egypt-pattern"></div>
    
    <div class="game-container">
        <canvas id="gameCanvas"></canvas>
        
        <div class="score-overlay">
            <div class="score-item">
                <div class="score-label">–°–ß–ï–¢</div>
                <div id="score" class="score-value">0</div>
            </div>
            <div class="score-item">
                <div class="score-label">–†–ï–ö–û–†–î</div>
                <div id="highScore" class="score-value">0</div>
            </div>
            <div class="score-item">
                <div class="score-label">FPS</div>
                <div id="fps" class="score-value">60</div>
            </div>
        </div>
        
        <div class="mobile-jump-btn"></div>
        
        <div id="gameOver" class="game-over">
            <h2>–ò–ì–†–ê –û–ö–û–ù–ß–ï–ù–ê</h2>
            <p>–í–∞—à —Å—á–µ—Ç: <span id="finalScore">0</span></p>
            <button id="restartBtn">–ò–ì–†–ê–¢–¨ –°–ù–û–í–ê</button>
        </div>
        
        <div id="startScreen" class="start-screen">
            <h1>–ï–ì–ò–ü–ï–¢–°–ö–ò–ô –î–ò–ù–û–ó–ê–í–†–ò–ö</h1>
            <p>–ù–æ—á—å –≤ –ø—É—Å—Ç—ã–Ω–µ. –ü—Ä—ã–≥–∞–π—Ç–µ —á–µ—Ä–µ–∑ –Ω–∏–∑–∫–∏–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è!</p>
            <div class="controls-info">
                <p><span class="key">–ü–†–û–ë–ï–õ</span> –∏–ª–∏ <span class="key">‚Üë</span> - –ü—Ä—ã–∂–æ–∫</p>
                <p><span class="key">‚Üì</span> - –ü—Ä–∏—Å–µ—Å—Ç—å</p>
                <p>–¢–æ–ª—å–∫–æ –Ω–∏–∑–∫–∏–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è!</p>
            </div>
            <button id="startBtn">–ù–ê–ß–ê–¢–¨ –ò–ì–†–£</button>
        </div>
    </div>

    <script>
        // ========== –ù–ê–°–¢–†–û–ô–ö–ò –ò–ì–†–´ - –ï–ì–ò–ü–ï–¢–°–ö–ê–Ø –ù–û–ß–¨ ==========
        const GAME = {
            playerWidth: 100,           // –†–∞–∑–º–µ—Ä –∏–≥—Ä–æ–∫–∞
            playerHeight: 100,          // –†–∞–∑–º–µ—Ä –∏–≥—Ä–æ–∫–∞
            playerJumpForce: 14,        // –°–∏–ª–∞ –ø—Ä—ã–∂–∫–∞ (—É–º–µ–Ω—å—à–µ–Ω–∞)
            gravity: 0.7,              // –ì—Ä–∞–≤–∏—Ç–∞—Ü–∏—è (—É–º–µ–Ω—å—à–µ–Ω–∞)
            initialSpeed: 4,           // –û–ß–ï–ù–¨ –ú–ï–î–õ–ï–ù–ù–ê–Ø –Ω–∞—á–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å
            speedIncrease: 0.00005,    // –û–ß–ï–ù–¨ –º–µ–¥–ª–µ–Ω–Ω–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ
            obstacleWidth: 25,         // –®–∏—Ä–∏–Ω–∞ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π
            minObstacleHeight: 40,     // –ú–ò–ù–ò–ú–ê–õ–¨–ù–ê–Ø –≤—ã—Å–æ—Ç–∞ (—Ç–æ–ª—å–∫–æ –Ω–∏–∑–∫–∏–µ!)
            maxObstacleHeight: 60,     // –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–ê–Ø –≤—ã—Å–æ—Ç–∞ (–Ω–µ–≤—ã—Å–æ–∫–∏–µ!)
            minObstacleGap: 500,       // –ë–û–õ–¨–®–û–ï —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è–º–∏
            maxObstacleGap: 800,       // –û–ß–ï–ù–¨ –±–æ–ª—å—à–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ
            groundHeight: 40,          // –¢–æ–ª—Å—Ç—ã–π —Å–ª–æ–π –ø–µ—Å–∫–∞
            starCount: 80,             // –ó–≤–µ–∑–¥—ã
            moonSize: 100,             // –ë–æ–ª—å—à–∞—è –ª—É–Ω–∞
            pyramidCount: 3            // –ü–∏—Ä–∞–º–∏–¥—ã –Ω–∞ –∑–∞–¥–Ω–µ–º –ø–ª–∞–Ω–µ
        };

        // ========== –ü–ï–†–ï–ú–ï–ù–ù–´–ï –ò–ì–†–´ ==========
        let canvas, ctx;
        let gameRunning = false;
        let gameSpeed = GAME.initialSpeed;
        let score = 0;
        let highScore = parseInt(localStorage.getItem('dinoHighScore')) || 0;
        let frames = 0;
        let fps = 60;
        let lastFpsUpdate = 0;
        let fpsFrameCount = 0;
        let gameLoopId = null;
        let isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        
        // ========== –ò–ì–†–û–í–´–ï –û–ë–™–ï–ö–¢–´ ==========
        let player = {
            x: 200,                    // –û—Ç—Å—Ç—É–ø –æ—Ç –∫—Ä–∞—è
            y: 0,
            width: GAME.playerWidth,
            height: GAME.playerHeight,
            velocityY: 0,
            isJumping: false,
            isDucking: false,
            duckHeight: GAME.playerHeight * 0.5, // –ù–∏–∑–∫–æ–µ –ø—Ä–∏—Å–µ–¥–∞–Ω–∏–µ
            groundY: 0
        };
        
        let obstacles = [];            // –¢–æ–ª—å–∫–æ –ù–ò–ó–ö–ò–ï –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è
        let stars = [];
        let pyramids = [];
        
        // ========== –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–Ø ==========
        let playerImg = new Image();
        let obstacleImg = new Image(); // –ù–∏–∑–∫–∏–µ –µ–≥–∏–ø–µ—Ç—Å–∫–∏–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è
        
        // ========== DOM –≠–õ–ï–ú–ï–ù–¢–´ ==========
        let scoreElement, highScoreElement, fpsElement;
        let jumpBtn, restartBtn, startBtn;
        let gameOverScreen, finalScoreElement;
        let startScreen;

        // ========== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ==========
        function init() {
            console.log("üöÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –µ–≥–∏–ø–µ—Ç—Å–∫–æ–π –Ω–æ—á–Ω–æ–π –∏–≥—Ä—ã...");
            
            // –ü–æ–ª—É—á–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã
            canvas = document.getElementById('gameCanvas');
            ctx = canvas.getContext('2d');
            
            scoreElement = document.getElementById('score');
            highScoreElement = document.getElementById('highScore');
            fpsElement = document.getElementById('fps');
            jumpBtn = document.querySelector('.mobile-jump-btn');
            restartBtn = document.getElementById('restartBtn');
            startBtn = document.getElementById('startBtn');
            gameOverScreen = document.querySelector('.game-over');
            finalScoreElement = gameOverScreen.querySelector('p span');
            startScreen = document.querySelector('.start-screen');
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä—ã –∫–∞–Ω–≤–∞—Å–∞
            resizeCanvas();
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–∞—Ä—Ç–∏–Ω–∫—É –∏–≥—Ä–æ–∫–∞
            playerImg.src = 'images/othcim.jpg';
            playerImg.crossOrigin = "anonymous";
            playerImg.onload = function() {
                console.log("‚úÖ –ö–∞—Ä—Ç–∏–Ω–∫–∞ –∏–≥—Ä–æ–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞");
                createObstacleImage();
                startGameAfterLoad();
            };
            playerImg.onerror = function() {
                console.log("‚ùå –ö–∞—Ä—Ç–∏–Ω–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, —Å–æ–∑–¥–∞—é –µ–≥–∏–ø–µ—Ç—Å–∫–æ–≥–æ –¥–∏–Ω–æ–∑–∞–≤—Ä–∏–∫–∞...");
                createDefaultPlayerImage();
                createObstacleImage();
                startGameAfterLoad();
            };
            
            // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
            setupControls();
            
            // –°–æ–∑–¥–∞–µ–º –∑–≤–µ–∑–¥—ã –∏ –ø–∏—Ä–∞–º–∏–¥—ã
            createStars();
            createPyramids();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–µ–∫–æ—Ä–¥
            updateHighScore();
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞—Ä—Ç–æ–≤—ã–π —ç–∫—Ä–∞–Ω –Ω–∞ –ü–ö
            if (!isMobile) {
                startScreen.style.display = 'flex';
            }
            
            console.log("üéÆ –ï–≥–∏–ø–µ—Ç—Å–∫–∞—è –∏–≥—Ä–∞ –≥–æ—Ç–æ–≤–∞!");
        }

        function startGameAfterLoad() {
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é –∑–µ–º–ª–∏
            player.groundY = canvas.height - GAME.groundHeight - player.height;
            player.y = player.groundY;
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
            requestAnimationFrame(gameLoop);
        }

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é –∑–µ–º–ª–∏
            if (player) {
                player.groundY = canvas.height - GAME.groundHeight - player.height;
                if (!player.isJumping) {
                    player.y = player.groundY;
                }
            }
            
            // –ü–µ—Ä–µ—Å–æ–∑–¥–∞–µ–º –∑–≤–µ–∑–¥—ã –∏ –ø–∏—Ä–∞–º–∏–¥—ã –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞
            createStars();
            createPyramids();
            
            console.log(`üìê –†–∞–∑–º–µ—Ä —ç–∫—Ä–∞–Ω–∞: ${canvas.width}x${canvas.height}`);
        }

        // ========== –°–û–ó–î–ê–ù–ò–ï –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô ==========
        function createDefaultPlayerImage() {
            const tempCanvas = document.createElement('canvas');
            tempCanvas.width = GAME.playerWidth;
            tempCanvas.height = GAME.playerHeight;
            const tempCtx = tempCanvas.getContext('2d');
            
            // –ï–≥–∏–ø–µ—Ç—Å–∫–∏–π –¥–∏–Ω–æ–∑–∞–≤—Ä–∏–∫
            tempCtx.fillStyle = '#8B4513'; // –ö–æ—Ä–∏—á–Ω–µ–≤—ã–π
            
            // –¢–µ–ª–æ
            tempCtx.fillRect(20, 30, 60, 40);
            
            // –ù–æ–≥–∏
            tempCtx.fillRect(25, 70, 15, 20);
            tempCtx.fillRect(60, 70, 15, 20);
            
            // –ì–æ–ª–æ–≤–∞ —Å –µ–≥–∏–ø–µ—Ç—Å–∫–∏–º –≥–æ–ª–æ–≤–Ω—ã–º —É–±–æ—Ä–æ–º
            tempCtx.fillRect(75, 20, 20, 30);
            
            // –ì–æ–ª–æ–≤–Ω–æ–π —É–±–æ—Ä (–ø–æ–ª–æ—Å–∞—Ç—ã–π)
            tempCtx.fillStyle = '#D4AF37';
            for (let i = 0; i < 3; i++) {
                tempCtx.fillRect(70, 15 + i * 5, 30, 2);
            }
            
            // –ì–ª–∞–∑
            tempCtx.fillStyle = '#FFD700';
            tempCtx.fillRect(85, 25, 8, 8);
            tempCtx.fillStyle = '#000';
            tempCtx.fillRect(87, 27, 4, 4);
            
            // –•–≤–æ—Å—Ç —Å —É–∑–æ—Ä–æ–º
            tempCtx.fillStyle = '#8B4513';
            tempCtx.fillRect(5, 40, 15, 8);
            
            // –ï–≥–∏–ø–µ—Ç—Å–∫–∏–π —É–∑–æ—Ä –Ω–∞ —Ç–µ–ª–µ
            tempCtx.fillStyle = '#D4AF37';
            tempCtx.fillRect(30, 35, 40, 3);
            tempCtx.fillRect(30, 45, 40, 3);
            
            playerImg.src = tempCanvas.toDataURL();
        }

        function createObstacleImage() {
            const tempCanvas = document.createElement('canvas');
            tempCanvas.width = GAME.obstacleWidth;
            tempCanvas.height = GAME.maxObstacleHeight;
            const tempCtx = tempCanvas.getContext('2d');
            
            // –ù–ò–ó–ö–û–ï –µ–≥–∏–ø–µ—Ç—Å–∫–æ–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ (—Å–∞—Ä–∂–∞/–∫–∞–º–µ–Ω—å)
            tempCtx.fillStyle = '#8B7355'; // –¶–≤–µ—Ç –ø–µ—Å–∫–∞
            
            // –û—Å–Ω–æ–≤–∞–Ω–∏–µ
            tempCtx.fillRect(5, GAME.maxObstacleHeight - 40, GAME.obstacleWidth - 10, 40);
            
            // –í–µ—Ä—Ö–Ω—è—è —á–∞—Å—Ç—å —Å —É–∑–æ—Ä–æ–º
            tempCtx.fillStyle = '#D4AF37';
            tempCtx.fillRect(5, GAME.maxObstacleHeight - 45, GAME.obstacleWidth - 10, 5);
            
            // –ï–≥–∏–ø–µ—Ç—Å–∫–∏–π —É–∑–æ—Ä
            tempCtx.fillStyle = '#8B4513';
            for (let i = 0; i < 3; i++) {
                tempCtx.fillRect(
                    8 + i * 6, 
                    GAME.maxObstacleHeight - 30, 
                    3, 
                    15
                );
            }
            
            obstacleImg.src = tempCanvas.toDataURL();
        }

        function createStars() {
            stars = [];
            for (let i = 0; i < GAME.starCount; i++) {
                stars.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height * 0.7,
                    size: Math.random() * 3 + 1,
                    brightness: Math.random() * 0.7 + 0.3,
                    twinkleSpeed: Math.random() * 0.03 + 0.01
                });
            }
        }

        function createPyramids() {
            pyramids = [];
            for (let i = 0; i < GAME.pyramidCount; i++) {
                pyramids.push({
                    x: Math.random() * canvas.width,
                    width: Math.random() * 200 + 150,
                    height: Math.random() * 80 + 120,
                    distance: Math.random() * 0.3 + 0.7 // –î–ª—è –ø–∞—Ä–∞–ª–ª–∞–∫—Å–∞
                });
            }
        }

        // ========== –£–ü–†–ê–í–õ–ï–ù–ò–ï –ò–ì–†–û–ô ==========
        function startGame() {
            if (gameRunning) return;
            
            resetGame();
            gameRunning = true;
            gameOverScreen.style.display = 'none';
            startScreen.style.display = 'none';
            
            console.log("‚ñ∂Ô∏è –ò–≥—Ä–∞ –Ω–∞—á–∞—Ç–∞!");
        }

        function resetGame() {
            score = 0;
            gameSpeed = GAME.initialSpeed; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å –∫ –ú–ò–ù–ò–ú–ê–õ–¨–ù–û–ô
            obstacles = [];
            frames = 0;
            fpsFrameCount = 0;
            lastFpsUpdate = Date.now();
            
            player.y = player.groundY;
            player.velocityY = 0;
            player.isJumping = false;
            player.isDucking = false;
            player.height = GAME.playerHeight;
            
            updateScore();
            updateFPS();
        }

        function gameOver() {
            gameRunning = false;
            gameOverScreen.style.display = 'flex';
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–µ–∫–æ—Ä–¥
            if (score > highScore) {
                highScore = score;
                localStorage.setItem('dinoHighScore', highScore);
                updateHighScore();
                highScoreElement.classList.add('new-record');
                setTimeout(() => {
                    highScoreElement.classList.remove('new-record');
                }, 3000);
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏—Ç–æ–≥–æ–≤—ã–π —Å—á–µ—Ç
            finalScoreElement.textContent = formatNumber(score);
            
            console.log("üíÄ –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞! –°—á–µ—Ç:", score);
        }

        // ========== –ò–ì–†–û–í–ê–Ø –õ–û–ì–ò–ö–ê ==========
        function update() {
            if (!gameRunning) return;
            
            frames++;
            fpsFrameCount++;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º FPS –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
            const now = Date.now();
            if (now - lastFpsUpdate >= 1000) {
                fps = Math.round((fpsFrameCount * 1000) / (now - lastFpsUpdate));
                fps = Math.min(fps, 3334444);
                updateFPS();
                fpsFrameCount = 0;
                lastFpsUpdate = now;
            }
            
            // –û–ß–ï–ù–¨-–û–ß–ï–ù–¨ –º–µ–¥–ª–µ–Ω–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å
            if (frames % 200 === 0) { // –¢–æ–ª—å–∫–æ –∫–∞–∂–¥—ã–π 200-–π –∫–∞–¥—Ä
                gameSpeed += GAME.speedIncrease;
                console.log("üìà –°–∫–æ—Ä–æ—Å—Ç—å —É–≤–µ–ª–∏—á–µ–Ω–∞ –¥–æ:", gameSpeed.toFixed(3));
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–≥—Ä–æ–∫–∞
            updatePlayer();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è (–†–ï–î–ö–û!)
            updateObstacles();
            
            // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á–µ—Ç
            score += 0.5; // –û–ß–ï–ù–¨ –º–µ–¥–ª–µ–Ω–Ω–æ
            updateScore();
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è
            checkCollisions();
        }

        function updatePlayer() {
            if (player.isJumping) {
                player.velocityY -= GAME.gravity;
                player.y -= player.velocityY;
                
                if (player.y >= player.groundY) {
                    player.y = player.groundY;
                    player.isJumping = false;
                    player.velocityY = 0;
                }
            }
        }

        function updateObstacles() {
            // –£–¥–∞–ª—è–µ–º –≤—ã—à–µ–¥—à–∏–µ –∑–∞ —ç–∫—Ä–∞–Ω
            obstacles = obstacles.filter(obstacle => obstacle.x + obstacle.width > 0);
            
            // –î–≤–∏–≥–∞–µ–º –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è –ú–ï–î–õ–ï–ù–ù–û
            for (let obstacle of obstacles) {
                obstacle.x -= gameSpeed;
                
                // –û—Ç–º–µ—á–∞–µ–º –ø—Ä–æ–π–¥–µ–Ω–Ω—ã–µ
                if (!obstacle.passed && obstacle.x + obstacle.width < player.x) {
                    obstacle.passed = true;
                    score += 25; // –ú–∞–ª–µ–Ω—å–∫–∏–π –±–æ–Ω—É—Å
                    scoreElement.classList.add('score-pop');
                    setTimeout(() => {
                        scoreElement.classList.remove('score-pop');
                    }, 400);
                }
            }
            
            // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è –û–ß–ï–ù–¨ –†–ï–î–ö–û
            // –¢–æ–ª—å–∫–æ –∫–∞–∂–¥—ã–π 150-–π –∫–∞–¥—Ä –ò –µ—Å–ª–∏ –ø—Ä–æ—à–ª–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—Ä–µ–º–µ–Ω–∏ –ò –µ—Å–ª–∏ –º–µ–Ω—å—à–µ 2 –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π
            if (frames % 150 === 0 && obstacles.length < 2) {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –ø–æ—Å–ª–µ–¥–Ω–µ–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ –¥–∞–ª–µ–∫–æ
                const lastObstacle = obstacles[obstacles.length - 1];
                if (!lastObstacle || (canvas.width - lastObstacle.x) > GAME.minObstacleGap) {
                    createObstacle();
                }
            }
        }

        function createObstacle() {
            // –¢–û–õ–¨–ö–û –ù–ò–ó–ö–ò–ï –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è!
            const height = Math.floor(Math.random() * 
                (GAME.maxObstacleHeight - GAME.minObstacleHeight)) + 
                GAME.minObstacleHeight;
            
            obstacles.push({
                x: canvas.width,
                y: canvas.height - GAME.groundHeight - height,
                width: GAME.obstacleWidth,
                height: height,
                passed: false,
                isLow: height < 50 // –û—Ç–º–µ—Ç–∫–∞ –Ω–∏–∑–∫–æ–≥–æ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è
            });
            
            console.log("üóø –°–æ–∑–¥–∞–Ω–æ –Ω–∏–∑–∫–æ–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ. –í—ã—Å–æ—Ç–∞:", height, "–í—Å–µ–≥–æ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π:", obstacles.length);
        }

        function checkCollisions() {
            for (let obstacle of obstacles) {
                if (checkCollision(player, obstacle)) {
                    gameOver();
                    return;
                }
            }
        }

        function checkCollision(rect1, rect2) {
            return rect1.x < rect2.x + rect2.width &&
                   rect1.x + rect1.width > rect2.x &&
                   rect1.y < rect2.y + rect2.height &&
                   rect1.y + rect1.height > rect2.y;
        }

        // ========== –£–ü–†–ê–í–õ–ï–ù–ò–ï ==========
        function jump() {
            if (!gameRunning) {
                startGame();
                return;
            }
            
            if (!player.isJumping) {
                player.isJumping = true;
                player.velocityY = GAME.playerJumpForce;
                player.isDucking = false;
                player.height = GAME.playerHeight;
            }
        }

        function duck(startDucking) {
            if (!gameRunning || player.isJumping) return;
            
            player.isDucking = startDucking;
            player.height = startDucking ? player.duckHeight : GAME.playerHeight;
            player.y = startDucking ? 
                player.groundY + (GAME.playerHeight - player.duckHeight) : 
                player.groundY;
        }

        // ========== –û–¢–†–ò–°–û–í–ö–ê ==========
        function draw() {
            // –û—á–∏—â–∞–µ–º —ç–∫—Ä–∞–Ω
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // –†–∏—Å—É–µ–º –µ–≥–∏–ø–µ—Ç—Å–∫—É—é –Ω–æ—á—å
            drawEgyptianNight();
            
            // –†–∏—Å—É–µ–º –∑–≤–µ–∑–¥—ã
            drawStars();
            
            // –†–∏—Å—É–µ–º –ª—É–Ω—É
            drawMoon();
            
            // –†–∏—Å—É–µ–º –ø–∏—Ä–∞–º–∏–¥—ã
            drawPyramids();
            
            // –†–∏—Å—É–µ–º –ø–µ—Å–æ–∫ (–æ—Ä–∞–Ω–∂–µ–≤–æ-–∂–µ–ª—Ç—ã–π –µ–≥–∏–ø–µ—Ç—Å–∫–∏–π)
            drawEgyptianSand();
            
            // –†–∏—Å—É–µ–º –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è
            drawObstacles();
            
            // –†–∏—Å—É–µ–º –∏–≥—Ä–æ–∫–∞
            drawPlayer();
            
            // –†–∏—Å—É–µ–º —Å–≤–µ—Ç –æ—Ç –ª—É–Ω—ã
            drawMoonlight();
        }

        function drawEgyptianNight() {
            // –¢–µ–º–Ω–æ-—Å–∏–Ω–µ–µ –Ω–æ—á–Ω–æ–µ –Ω–µ–±–æ –ï–≥–∏–ø—Ç–∞
            const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height * 0.7);
            gradient.addColorStop(0, '#0c1445'); // –¢–µ–º–Ω–æ-—Å–∏–Ω–∏–π
            gradient.addColorStop(0.5, '#1a1a2e'); // –ü–æ—á—Ç–∏ —á–µ—Ä–Ω—ã–π
            gradient.addColorStop(1, '#16213e'); // –¢–µ–º–Ω–æ-—Å–∏–Ω–∏–π
            
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // –°–æ–∑–≤–µ–∑–¥–∏—è
            ctx.fillStyle = 'rgba(255, 255, 255, 0.1)';
            const constellations = [
                {x: canvas.width * 0.2, y: 100, size: 4},
                {x: canvas.width * 0.4, y: 150, size: 3},
                {x: canvas.width * 0.6, y: 80, size: 5},
                {x: canvas.width * 0.8, y: 120, size: 4}
            ];
            
            constellations.forEach(star => {
                ctx.beginPath();
                ctx.arc(star.x, star.y, star.size, 0, Math.PI * 2);
                ctx.fill();
                
                // –õ—É—á–∏ –æ—Ç —è—Ä–∫–∏—Ö –∑–≤–µ–∑–¥
                ctx.strokeStyle = 'rgba(255, 255, 255, 0.05)';
                ctx.lineWidth = 1;
                for (let i = 0; i < 8; i++) {
                    const angle = (i * Math.PI) / 4;
                    ctx.beginPath();
                    ctx.moveTo(star.x, star.y);
                    ctx.lineTo(
                        star.x + Math.cos(angle) * (star.size * 8),
                        star.y + Math.sin(angle) * (star.size * 8)
                    );
                    ctx.stroke();
                }
            });
        }

        function drawStars() {
            for (let star of stars) {
                // –ú–µ—Ä—Ü–∞–Ω–∏–µ –∑–≤–µ–∑–¥
                const twinkle = Math.sin(frames * star.twinkleSpeed) * 0.4 + 0.6;
                
                ctx.fillStyle = `rgba(255, 255, 220, ${star.brightness * twinkle})`;
                ctx.beginPath();
                ctx.arc(star.x, star.y, star.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        function drawMoon() {
            // –ë–æ–ª—å—à–∞—è —è—Ä–∫–∞—è –ª—É–Ω–∞
            ctx.fillStyle = '#FFF8DC'; // –¶–≤–µ—Ç —Å–ª–æ–Ω–æ–≤–æ–π –∫–æ—Å—Ç–∏
            ctx.beginPath();
            ctx.arc(canvas.width - 120, 120, GAME.moonSize, 0, Math.PI * 2);
            ctx.fill();
            
            // –ö—Ä–∞—Ç–µ—Ä—ã –Ω–∞ –ª—É–Ω–µ
            ctx.fillStyle = '#D4AF37'; // –ó–æ–ª–æ—Ç–∏—Å—Ç—ã–π
            ctx.beginPath();
            ctx.arc(canvas.width - 140, 100, 15, 0, Math.PI * 2);
            ctx.arc(canvas.width - 100, 150, 20, 0, Math.PI * 2);
            ctx.arc(canvas.width - 120, 130, 10, 0, Math.PI * 2);
            ctx.fill();
            
            // –°–≤–µ—á–µ–Ω–∏–µ –ª—É–Ω—ã
            const glow = ctx.createRadialGradient(
                canvas.width - 120, 120, GAME.moonSize,
                canvas.width - 120, 120, GAME.moonSize * 2
            );
            glow.addColorStop(0, 'rgba(255, 248, 220, 0.3)');
            glow.addColorStop(1, 'rgba(255, 248, 220, 0)');
            
            ctx.fillStyle = glow;
            ctx.beginPath();
            ctx.arc(canvas.width - 120, 120, GAME.moonSize * 2, 0, Math.PI * 2);
            ctx.fill();
        }

        function drawPyramids() {
            for (let pyramid of pyramids) {
                // –ü–∞—Ä–∞–ª–ª–∞–∫—Å-—ç—Ñ—Ñ–µ–∫—Ç
                const parallaxX = pyramid.x - (frames * 0.1 * pyramid.distance);
                
                // –ï—Å–ª–∏ –ø–∏—Ä–∞–º–∏–¥–∞ —É—à–ª–∞ –∑–∞ —ç–∫—Ä–∞–Ω, –ø–µ—Ä–µ–º–µ—â–∞–µ–º –µ–µ
                if (parallaxX + pyramid.width < 0) {
                    pyramid.x = canvas.width;
                }
                
                // –¶–≤–µ—Ç –ø–∏—Ä–∞–º–∏–¥—ã (–∑–æ–ª–æ—Ç–∏—Å—Ç—ã–π –Ω–æ—á—å—é)
                ctx.fillStyle = pyramid.distance > 0.8 ? '#D4AF37' : '#B8860B';
                
                // –†–∏—Å—É–µ–º –ø–∏—Ä–∞–º–∏–¥—É
                ctx.beginPath();
                ctx.moveTo(parallaxX, canvas.height - GAME.groundHeight);
                ctx.lineTo(parallaxX + pyramid.width / 2, canvas.height - GAME.groundHeight - pyramid.height);
                ctx.lineTo(parallaxX + pyramid.width, canvas.height - GAME.groundHeight);
                ctx.closePath();
                ctx.fill();
                
                // –¢–µ–∫—Å—Ç—É—Ä–∞ –ø–∏—Ä–∞–º–∏–¥—ã (—Å–ª–æ–∏)
                ctx.strokeStyle = '#8B4513';
                ctx.lineWidth = 1;
                const layerHeight = pyramid.height / 10;
                for (let i = 1; i < 10; i++) {
                    const y = canvas.height - GAME.groundHeight - (layerHeight * i);
                    const layerWidth = pyramid.width * (1 - (i / 10));
                    ctx.beginPath();
                    ctx.moveTo(parallaxX + (pyramid.width - layerWidth) / 2, y);
                    ctx.lineTo(parallaxX + pyramid.width - (pyramid.width - layerWidth) / 2, y);
                    ctx.stroke();
                }
            }
        }

        function drawEgyptianSand() {
            // –û–†–ê–ù–ñ–ï–í–û-–ñ–ï–õ–¢–´–ô –ï–ì–ò–ü–ï–¢–°–ö–ò–ô –ü–ï–°–û–ö
            const sandGradient = ctx.createLinearGradient(0, canvas.height - GAME.groundHeight, 0, canvas.height);
            sandGradient.addColorStop(0, '#D4AF37'); // –ó–æ–ª–æ—Ç–∏—Å—Ç—ã–π —Å–≤–µ—Ä—Ö—É
            sandGradient.addColorStop(1, '#B8860B'); // –¢–µ–º–Ω–µ–µ —Å–Ω–∏–∑—É
            
            // –û—Å–Ω–æ–≤–Ω–æ–π –ø–µ—Å–æ–∫
            ctx.fillStyle = sandGradient;
            ctx.fillRect(0, canvas.height - GAME.groundHeight, canvas.width, GAME.groundHeight);
            
            // –í–æ–ª–Ω—ã –ø–µ—Å–∫–∞ (–¥—é–Ω—ã)
            ctx.fillStyle = '#8B4513'; // –ö–æ—Ä–∏—á–Ω–µ–≤—ã–π –¥–ª—è —Ç–µ–Ω–µ–π
            for (let i = 0; i < canvas.width; i += 60) {
                const waveHeight = Math.sin((frames * 0.01) + (i * 0.005)) * 8 + 10;
                const waveWidth = 50;
                ctx.beginPath();
                ctx.moveTo(i, canvas.height - GAME.groundHeight);
                ctx.quadraticCurveTo(
                    i + waveWidth/2,
                    canvas.height - GAME.groundHeight - waveHeight,
                    i + waveWidth,
                    canvas.height - GAME.groundHeight
                );
                ctx.fill();
            }
            
            // –ë–ª–µ—Å—Ç–∫–∏ –≤ –ø–µ—Å–∫–µ (–æ—Ç—Ä–∞–∂–µ–Ω–∏–µ –∑–≤–µ–∑–¥)
            ctx.fillStyle = 'rgba(255, 255, 255, 0.1)';
            for (let i = 0; i < 20; i++) {
                const x = (frames * 0.5 + i * 100) % canvas.width;
                const size = Math.sin(frames * 0.02 + i) * 2 + 2;
                ctx.beginPath();
                ctx.arc(x, canvas.height - GAME.groundHeight + 5, size, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        function drawMoonlight() {
            // –°–≤–µ—Ç –æ—Ç –ª—É–Ω—ã –Ω–∞ –∑–µ–º–ª–µ
            const moonlight = ctx.createRadialGradient(
                canvas.width - 120, 120, 0,
                canvas.width - 120, 120, canvas.width * 0.8
            );
            moonlight.addColorStop(0, 'rgba(255, 248, 220, 0.1)');
            moonlight.addColorStop(0.5, 'rgba(212, 175, 55, 0.05)');
            moonlight.addColorStop(1, 'rgba(212, 175, 55, 0)');
            
            ctx.fillStyle = moonlight;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
        }

        function drawPlayer() {
            // –†–∏—Å—É–µ–º –∫–∞—Ä—Ç–∏–Ω–∫—É –∏–≥—Ä–æ–∫–∞
            ctx.drawImage(playerImg, player.x, player.y, player.width, player.height);
            
            // –¢–µ–Ω—å –ø–æ–¥ –∏–≥—Ä–æ–∫–æ–º (–¥–ª–∏–Ω–Ω–∞—è –æ—Ç –ª—É–Ω—ã)
            const shadow = ctx.createRadialGradient(
                player.x + player.width/2,
                canvas.height - GAME.groundHeight,
                0,
                player.x + player.width/2,
                canvas.height - GAME.groundHeight,
                player.width * 2
            );
            shadow.addColorStop(0, 'rgba(0, 0, 0, 0.3)');
            shadow.addColorStop(1, 'rgba(0, 0, 0, 0)');
            
            ctx.fillStyle = shadow;
            ctx.beginPath();
            ctx.ellipse(
                player.x + player.width/2,
                canvas.height - GAME.groundHeight,
                player.width/2,
                10,
                0, 0, Math.PI * 2
            );
            ctx.fill();
        }

        function drawObstacles() {
            for (let obstacle of obstacles) {
                // –†–∏—Å—É–µ–º –Ω–∏–∑–∫–æ–µ –µ–≥–∏–ø–µ—Ç—Å–∫–æ–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ
                const actualHeight = Math.min(obstacle.height, GAME.maxObstacleHeight);
                ctx.drawImage(
                    obstacleImg,
                    0, obstacleImg.height - actualHeight,
                    obstacle.width, actualHeight,
                    obstacle.x, obstacle.y,
                    obstacle.width, actualHeight
                );
                
                // –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –æ—Ç –ª—É–Ω—ã
                if (obstacle.x > canvas.width * 0.6) {
                    ctx.fillStyle = 'rgba(255, 248, 220, 0.1)';
                    ctx.fillRect(obstacle.x, obstacle.y, obstacle.width, 5);
                }
                
                // –¢–µ–Ω—å –ø–æ–¥ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ–º
                ctx.fillStyle = 'rgba(0, 0, 0, 0.2)';
                ctx.fillRect(
                    obstacle.x + 3,
                    canvas.height - GAME.groundHeight,
                    obstacle.width - 6,
                    8
                );
            }
        }

        // ========== –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò ==========
        function updateScore() {
            scoreElement.textContent = Math.floor(score);
        }

        function updateHighScore() {
            highScoreElement.textContent = formatNumber(highScore);
        }

        function updateFPS() {
            fpsElement.textContent = formatNumber(fps);
            
            // –¶–≤–µ—Ç FPS –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∑–Ω–∞—á–µ–Ω–∏—è
            if (fps < 30) {
                fpsElement.style.color = '#ff4444';
            } else if (fps < 50) {
                fpsElement.style.color = '#ff9800';
            } else {
                fpsElement.style.color = '#FF6B6B';
            }
        }

        function formatNumber(num) {
            if (num >= 1000000000) {
                return (num / 1000000000).toFixed(1) + 'B';
            }
            if (num >= 1000000) {
                return (num / 1000000).toFixed(1) + 'M';
            }
            if (num >= 1000) {
                return (num / 1000).toFixed(1) + 'K';
            }
            return Math.floor(num).toString();
        }

        // ========== –£–ü–†–ê–í–õ–ï–ù–ò–ï ==========
        function setupControls() {
            // –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞
            document.addEventListener('keydown', (e) => {
                switch(e.code) {
                    case 'Space':
                    case 'ArrowUp':
                        e.preventDefault();
                        jump();
                        break;
                    case 'ArrowDown':
                        e.preventDefault();
                        duck(true);
                        break;
                    case 'Enter':
                        if (!gameRunning && gameOverScreen.style.display === 'flex') {
                            startGame();
                        }
                        break;
                }
            });
            
            document.addEventListener('keyup', (e) => {
                if (e.code === 'ArrowDown') {
                    duck(false);
                }
            });
            
            // –ö–Ω–æ–ø–∫–∏
            if (jumpBtn) {
                jumpBtn.addEventListener('click', jump);
                jumpBtn.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    jump();
                });
            }
            
            if (restartBtn) {
                restartBtn.addEventListener('click', startGame);
            }
            
            if (startBtn) {
                startBtn.addEventListener('click', startGame);
            }
            
            // –ö–ª–∏–∫ –ø–æ –∫–∞–Ω–≤–∞—Å—É (—Å—Ç–∞—Ä—Ç –Ω–∞ –ü–ö)
            canvas.addEventListener('click', (e) => {
                if (!gameRunning && !isMobile) {
                    startGame();
                }
            });
            
            // –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
            window.addEventListener('resize', resizeCanvas);
            window.addEventListener('orientationchange', resizeCanvas);
            
            // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é
            canvas.addEventListener('contextmenu', (e) => e.preventDefault());
            
            // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º —Å–∫—Ä–æ–ª–ª –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö
            document.addEventListener('touchmove', (e) => {
                if (e.target === canvas || e.target === jumpBtn) {
                    e.preventDefault();
                }
            }, { passive: false });
        }

        // ========== –ò–ì–†–û–í–û–ô –¶–ò–ö–õ ==========
        function gameLoop(timestamp) {
            update();
            draw();
            gameLoopId = requestAnimationFrame(gameLoop);
        }

        // ========== –ó–ê–ü–£–°–ö ==========
        // –ñ–¥–µ–º –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('load', function() {
            setTimeout(init, 100);
        });
        
        // –ê–≤–∞—Ä–∏–π–Ω—ã–π –∑–∞–ø—É—Å–∫
        setTimeout(() => {
            if (!gameLoopId) {
                console.log("‚ö†Ô∏è –ê–≤–∞—Ä–∏–π–Ω—ã–π –∑–∞–ø—É—Å–∫ –∏–≥—Ä—ã...");
                init();
            }
        }, 2000);
    </script>
</body>
</html>
